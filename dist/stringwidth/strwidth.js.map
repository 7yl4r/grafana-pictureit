{"version":3,"sources":["../../src/stringwidth/strwidth.js"],"names":["deburr","widthsMap","settingsDefaults","font","size","getWidth","string","settings","sett","toLowerCase","variant","bold","italic","available","Object","keys","indexOf","Error","join","totalWidth","split","forEach","char","test","widths","x","width"],"mappings":";;;;;;;;AAEOA,Y;;AACAC,e;;;AAEDC,sB,GAAmB,EAAEC,MAAM,OAAR,EAAiBC,MAAM,GAAvB,E;;AAEnBC,c,GAAW,SAAXA,QAAW,CAACC,MAAD,EAASC,QAAT,EAAsB;AACrC,YAAMC,OAAOD,QAAb;AACA,YAAMJ,OAAOK,KAAKL,IAAL,CAAUM,WAAV,EAAb;AACA,YAAML,OAAOI,KAAKJ,IAAlB;AACA,YAAMM,UAAU,KAAKF,KAAKG,IAAL,GAAY,CAAZ,GAAgB,CAArB,KAA2BH,KAAKI,MAAL,GAAc,CAAd,GAAkB,CAA7C,CAAhB;AACA,YAAMC,YAAYC,OAAOC,IAAP,CAAYd,SAAZ,CAAlB;AACA,YAAIY,UAAUG,OAAV,CAAkBb,IAAlB,MAA4B,CAAC,CAAjC,EAAoC;AAClC,gBAAM,IAAIc,KAAJ,uDAA8DJ,UAAUK,IAAV,CAAe,IAAf,CAA9D,CAAN;AACD;AACD,YAAIC,aAAa,CAAjB;AACAnB,eAAOM,MAAP,EAAec,KAAf,CAAqB,EAArB,EAAyBC,OAAzB,CAAiC,UAACC,IAAD,EAAU;AACzC,cAAI,cAAcC,IAAd,CAAmBD,IAAnB,CAAJ,EAA8B;AAAE;AAC9B,mBAAO,IAAP;AACD;AACD;AACA,cAAME,SAASvB,UAAUE,IAAV,EAAgBmB,IAAhB,KAAyBrB,UAAUE,IAAV,EAAgBsB,CAAxD;AACA,cAAMC,QAAQF,OAAOd,OAAP,CAAd;AACAS,wBAAcO,KAAd;AACA,iBAAO,IAAP;AACD,SATD;AAUA,eAAOP,cAAcf,OAAO,GAArB,CAAP;AACD,O;;yBAEcC,Q","file":"strwidth.js","sourcesContent":["\r\n//import deburr from 'lodash.deburr';\r\nimport deburr from \"./deburr.js\";\r\nimport widthsMap from './widthsMap.js';\r\n\r\nconst settingsDefaults = { font: 'Arial', size: 100 };\r\n\r\nconst getWidth = (string, settings) => {\r\n  const sett = settings;\r\n  const font = sett.font.toLowerCase();\r\n  const size = sett.size;\r\n  const variant = 0 + (sett.bold ? 1 : 0) + (sett.italic ? 2 : 0);\r\n  const available = Object.keys(widthsMap);\r\n  if (available.indexOf(font) === -1) {\r\n    throw new Error(`This font is not supported. Supported fonts are: ${available.join(', ')}`);\r\n  }\r\n  let totalWidth = 0;\r\n  deburr(string).split('').forEach((char) => {\r\n    if (/[\\x00-\\x1F]/.test(char)) { // non-printable character\r\n      return true;\r\n    }\r\n    // use width of 'x' as fallback for unregistered char\r\n    const widths = widthsMap[font][char] || widthsMap[font].x;\r\n    const width = widths[variant];\r\n    totalWidth += width;\r\n    return true;\r\n  });\r\n  return totalWidth * (size / 100);\r\n};\r\n\r\nexport default getWidth;"]}